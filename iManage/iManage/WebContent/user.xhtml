<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Home</title>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />
	<h:outputStylesheet name="components.css" library="primefaces" />
	<h:outputStylesheet name="mystyle.css" library="css" />
</h:head>

<h:body>
	<div class="ui-g" id="nav-bar" style="align-items:center;font-size:14px;">
		<p:outputPanel styleClass="ui-g ui-g-8 ui-sm-6">
			<p:commandButton id="menubutton" icon="pi pi-bars"  onclick="PF('sidebar').show()" />
			<h3 style="margin:0;font-size:26px;"><h:outputText value="iManage"/></h3>
			<p:commandButton value="Create" type="button" styleClass="btn"  icon="pi pi-plus" iconPos="right" onclick="PF('dlg2').show();" ></p:commandButton>
		</p:outputPanel>
		<p:outputPanel styleClass="ui-g ui-g-4 ui-sm-6" >
		<h:outputLink id="profile-tab">
			<span><h:outputText value="User name" /></span>
			<h:graphicImage name="profile.png" library="images" id="user-img"></h:graphicImage>
		</h:outputLink>
		</p:outputPanel>
	</div>
	
	<!-- Main Wrapper -->
	<div class="ui-g" id="main-wrapper">
	
	    <div class="ui-g-2" id="nav-panel" >
			<ul id="menu-options">
				<li><span style="font-size:20px;">Menu</span></li>
				<li><hr/></li>
				<li><h:outputLink value="javascript:void(0)"  onclick="toggleMenus(this,'all');" class="current">All Requests</h:outputLink></li>
				<li><h:outputLink value="javascript:void(0)" onclick="toggleMenus(this,'inp');">In progress</h:outputLink></li>
				<li><h:outputLink value="javascript:void(0)" onclick="toggleMenus(this,'comp');">Completed</h:outputLink></li>
				<li><h:outputLink value="javascript:void(0)" onclick="toggleMenus(this,'open');">Open</h:outputLink></li>
			</ul>
			<p:sidebar widgetVar="sidebar" baseZIndex="10000" style="background: rgb(244, 245, 247); " >
				<div class="ui-g-12" style="height: 100%;">
					<ul id="menu-options-sidebar">
						<li><span style="font-size: 20px;">Menu</span></li>
						<li><hr /></li>
						<li><h:outputLink value="javascript:void(0)" onclick="toggleMenus(this,'all');PF('sidebar').hide();" class="current">All Requests</h:outputLink></li>
						<li><h:outputLink value="javascript:void(0)" onclick="toggleMenus(this,'inp');PF('sidebar').hide();">In progress</h:outputLink></li>
						<li><h:outputLink value="javascript:void(0)" onclick="toggleMenus(this,'comp');PF('sidebar').hide();">Completed</h:outputLink></li>
						<li><h:outputLink value="javascript:void(0)" onclick="toggleMenus(this,'open');PF('sidebar').hide();">Open Requsts</h:outputLink></li>
						<li><hr /></li>
						<li><p:commandButton value="Create" type="button" styleClass="btn-sidebar"  icon="pi pi-plus" iconPos="right" onclick="PF('dlg2').show();PF('sidebar').hide();" ></p:commandButton></li>
					</ul>
				</div>
			</p:sidebar>
		</div>
		<div class="ui-g-10 ui-sm-12" >

			<p:dialog header="Create request" widgetVar="dlg2" modal="true"
				positionType="absolute" width="60%" height="600" resizable="false" draggable="false">
				<h:form styleClass="customForm">
					<p:panelGrid columns="1" layout="grid" >
						<p:outputLabel for="name" value="Subject"></p:outputLabel>
						<p:inputText id="name" value="#{workRequestBean.name}" styleClass="ui-g-12" required="true"></p:inputText>
						<p:outputLabel for="type" value="Type"></p:outputLabel>
						<p:selectOneMenu id="type" value="#{workRequestBean.requestType}"  style="width:150px;" required="true">
							<f:selectItem itemLabel="Select Type" itemValue=""  />
							<f:selectItem itemLabel="IT" itemValue="IT"  />
							<f:selectItem itemLabel="General" itemValue="General" />
						</p:selectOneMenu>
						<p:outputLabel for="status" value="Status"></p:outputLabel>
						<p:selectOneMenu id="status" value="#{workRequestBean.status}"  style="width:150px;" required="true">
							<f:selectItem itemLabel="Select Status ..." itemValue=""  />
							<f:selectItem itemLabel="Open (default)" itemValue="Open"  />
							<f:selectItem itemLabel="In Progress" itemValue="In Progress" />
						</p:selectOneMenu>
						
						<p:outputLabel for="desc" value="Description"></p:outputLabel>
						<p:inputTextarea id="desc"  value="#{workRequestBean.description}"  styleClass="ui-g-12 ui-sm-12" rows="10" required="true"/>
						
					</p:panelGrid>
					<p:outputPanel styleClass="customForm_Footer ui-g-12">
						<p:commandButton value="Submit" styleClass="btn" action="#{workRequestModel.addWorkRequest()}"  update="worklist DeleteForm:completedworklist inprogressworklist openprogressworklist @form "  />
					</p:outputPanel>					
				</h:form>
			</p:dialog>

			<p:outputPanel styleClass="display-panels active" id="all">
				<h2>Work Requests</h2>
				<p:dataTable var="list" value="#{workRequestModel.allWorksList}"
					id="worklist" reflow="true">
					<p:column headerText="Name">
						<h:outputText value="#{list.name}" />
					</p:column>
					<p:column headerText="Type">
						<h:outputText value="#{list.requestType}" />
					</p:column>
					<p:column headerText="Description" styleClass="singleLine">
						<h:outputText value="#{list.description}" />
					</p:column>
					<p:column headerText="Status">
						<h:outputText value="#{list.status}" />
					</p:column>
				</p:dataTable>
			</p:outputPanel>
			
			<p:outputPanel styleClass="display-panels " id="inp">
				<h2>In progress requests</h2>
				<p:dataTable var="list" value="#{workRequestModel.inProgressWorksList()}"
					id="inprogressworklist" reflow="true">
					<p:column headerText="Name">
						<h:outputText value="#{list.name}" />
					</p:column>
					<p:column headerText="Type">
						<h:outputText value="#{list.requestType}" />
					</p:column>
					<p:column headerText="Description" styleClass="singleLine">
						<h:outputText value="#{list.description}" />
					</p:column>
					<p:column headerText="Status">
						<h:outputText value="#{list.status}" />
					</p:column>
				</p:dataTable>
			</p:outputPanel>
			
			<p:outputPanel styleClass="display-panels " id="open">
				<h2>Open requests</h2>
				<p:dataTable var="list" value="#{workRequestModel.openProgressWorksList()}"
					id="openprogressworklist" reflow="true">
					<p:column headerText="Name">
						<h:outputText value="#{list.name}" />
					</p:column>
					<p:column headerText="Type">
						<h:outputText value="#{list.requestType}" />
					</p:column>
					<p:column headerText="Description" styleClass="singleLine">
						<h:outputText value="#{list.description}" />
					</p:column>
					<p:column headerText="Status">
						<h:outputText value="#{list.status}" />
					</p:column>
				</p:dataTable>
			</p:outputPanel>
	
			<p:outputPanel styleClass="display-panels " id="comp">
				<h2>Completed requests</h2>
				<h:form id="DeleteForm">
					<p:dataTable var="list" value="#{workRequestModel.completedWorksList()}"
						id="completedworklist" reflow="true">
						<p:column headerText="Name">
							<h:outputText value="#{list.name}" />
						</p:column>
						<p:column headerText="Type">
							<h:outputText value="#{list.requestType}" />
						</p:column>
						<p:column headerText="Description" styleClass="singleLine">
							<h:outputText value="#{list.description}" />
						</p:column>
						<p:column headerText="Status">
							<h:outputText value="#{list.status}" />
						</p:column>
						<p:column headerText="Edit">
							<p:commandButton value="delete" action="#{workRequestModel.deleteWorkRequest(list)}" update="completedworklist " ></p:commandButton>
						</p:column>
					</p:dataTable>
				</h:form>
			</p:outputPanel>
		</div>
		
	</div>
	<script>
		function toggleSubMenu(id){
				document.querySelector(".active").classList.remove("active");
				document.getElementById(id).classList.add("active");
			return false;
			}

		function toggleMenus(e, id) {
			var elements = document.getElementsByClassName('current');
			while (elements.length > 0) {
				elements[0].classList.remove('current');
			}

			if(document.getElementById('menu-options').contains(e)){
				var children = document.querySelectorAll("#menu-options li a");
				var index = Array.prototype.indexOf.call(children, e);
				var sidebarMenu = document.querySelectorAll("#menu-options-sidebar li a");
				sidebarMenu[index].classList.add("current");
	
			}else{
				var children = document.querySelectorAll("#menu-options-sidebar li a");
				var index = Array.prototype.indexOf.call(children, e);
				var sideMenu = document.querySelectorAll("#menu-options li a");
				sideMenu[index].classList.add("current");
			}
	
			document.querySelector(".active").classList.remove("active");
			document.getElementById(id).classList.add("active");
	
			e.classList.add("current");
			
			return false;
		}
		
		
		function toggleVisibility(id) {
			var x = document.getElementById(id);
			if (x.style.display === "none") {
				x.style.display = "block";
			} else {
				x.style.display = "none";
			}
		}
	</script>
</h:body>
</html>